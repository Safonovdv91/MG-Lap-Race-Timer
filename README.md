# ESP32 MG Lap Race Timer

Этот проект представляет собой универсальный таймер кругов на базе микроконтроллера ESP32, предназначенный для различных гоночных и измерительных приложений. Он предоставляет удобный веб-интерфейс для отображения данных в реальном времени и управления устройством.

## Особенности

*   **Множество режимов тайминга:**
    *   **Спидометр:** Измеряет скорость на заданном расстоянии.
    *   **Таймер круга:** Записывает индивидуальные времена кругов.
    *   **Гоночный таймер:** Работает как старт/стоп таймер для гонок.
*   **Веб-интерфейс:** Простой и отзывчивый веб-интерфейс, доступный через Wi-Fi портал для управления устройством и визуализации данных.
*   **Данные в реальном времени:** Просмотр живых измерений, статуса датчиков и уровня батареи.
*   **История измерений:** Сохраняет и отображает последние 5 измерений.
*   **Беспроводная настройка:** Настройка параметров Wi-Fi прямо из веб-интерфейса.
*   **Мониторинг батареи:** Отслеживает напряжение и уровень заряда батареи.

## Аппаратное обеспечение

*   **Микроконтроллер:** ESP32 (тестировалось на ESP32-DevKitC-V1).
*   **Датчики:** Требуется два цифровых датчика (например, ИК-датчики приближения), подключенных к GPIO пинам, определенным в [`include/config.h`](include/config.h).
*   **Батарея:** Для питания устройства может использоваться LiPo или Li-Ion аккумулятор. Напряжение батареи контролируется через делитель напряжения, подключенный к GPIO пину.

## Как использовать

 1.  Включите устройство. Оно создаст точку доступа Wi-Fi с именем `chrono.mg`.
 2.  Подключите телефон, планшет или компьютер к сети `chrono.mg`. Вас должны перенаправить на веб-интерфейс устройства. Если этого не произошло, откройте браузер и перейдите по адресу `http://chrono.mg`.
 3.  В веб-интерфейсе выберите желаемый режим тайминга (Спидометр, Таймер круга, Гоночный таймер).
 4.  В режиме Спидометра установите расстояние между датчиками.
 5.  Разместите два датчика должным образом для вашего измерительного приложения.
 6.  Взаимодействуйте с датчиками в соответствии с выбранным режимом для запуска измерений.
 7.  Просматривайте текущие измерения, историю, статус датчиков и уровень батареи на веб-странице.
 8.  Используйте кнопку Сброс для очистки текущего измерения и истории.

## Веб-интерфейс

Веб-интерфейс предоставляет просмотр в реальном времени статуса таймера и измерений. Он включает:

*   Дисплей, показывающий текущее измерение (скорость или время).
*   Таблицу с историей последних 5 измерений.
*   Элементы управления для выбора режима тайминга (Спидометр, Таймер круга, Гоночный таймер).
*   Кнопку для сброса таймера и истории.
*   Поле для регулировки расстояния для вычисления скорости (в режиме Спидометра).
*   Индикаторы активного состояния двух датчиков.
*   Визуальный индикатор уровня батареи.

## Сборка и загрузка

Этот проект использует PlatformIO для сборки и загрузки. Убедитесь, что у вас установлен PlatformIO Core.

 1. Клонируйте репозиторий.
 2.  Перейдите в директорию проекта.
 3. Запустите `platformio run` для сборки прошивки.
 4.  Запустите `platformio run --target upload` для загрузки прошивки в ESP32.