# Протокол модуляции ИК сигнала

## Частота модуляции
- Основная частота: 38 кГц (стандартная частота для ИК пультов дистанционного управления)
- Допустимый диапазон: 36-40 кГц (в соответствии с характеристиками TSOP38238)
- Точность: ±2 кГц (внутри допустимого диапазона чувствительности приемника)

## Формат сигнала

### Модуляция
- Тип модуляции: Амплитудная модуляция несущей частоты 38 кГц
- Несущая частота: 38 кГц
- Скважность: 50% (для максимальной эффективности ИК светодиода)
- Дальность: до 5-10 метров при правильной настройке мощности излучения

### Кодирование
- Базовая система: простое ON/OFF ключевание
- Когда луч не пересечен: приемник получает модулированный сигнал, выход HIGH
- При пересечении луча: сигнал блокируется, выход LOW (активный низкий уровень)
- Время реакции: < 20 мс (в соответствии с характеристиками TSOP38238)

## Временные параметры
- Время включения передатчика: до 100 мс
- Время реакции на пересечение: < 20 мс
- Минимальное время блокировки для детектирования: 1 мс
- Время восстановления после пересечения: 100 мс (настраиваемый параметр)

## Защита от помех
- Использование специфической частоты 38 кГц обеспечивает устойчивость к бытовым источникам света
- Встроенный фильтр в TSOP38238 подавляет постоянный и низкочастотный свет
- Настройка чувствительности через программные параметры
- Возможность автоматической подстройки чувствительности

## Протокол взаимодействия
- Передатчик: непрерывно излучает 38 кГц сигнал
- Приемник: принимает сигнал и поддерживает высокий уровень на выходе
- При пересечении луча: сигнал на приемнике пропадает, выход переходит в низкий уровень
- Событие детектируется как спадающий фронт (falling edge) в обработчике прерывания

## Настройка параметров
- Частота ШИМ: 38000 Гц
- Резолюция ШИМ: 10 бит (для точного контроля скважности)
- Время задержки включения: 100 мс (для стабилизации передатчика)
- Время антидребезга: 100 мс (настраивается в DEBOUNCE_TIME)